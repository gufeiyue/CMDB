{% extends 'base.html' %}




{% block title_content%}
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>正常配置项管理</h2>
        <ol class="breadcrumb">
            <li>
                <a href="{{ url_for('admin.index') }}">Dashbord</a>
            </li>
            <li>
                <a>配置管理</a>
            </li>
            <li class="active">
                <strong>批量修改配置项值</strong>
            </li>
        </ol>
    </div>
    <div class="col-lg-2">

    </div>
</div>

{% endblock %}

{% block admin_content %}

    <div id="ibox-content" class="ibox-title">
        <h5> 填写配置项信息 </h5>
        <div class="ibox-tools">
            <a class="collapse-link">
                <i class="fa fa-chevron-up"></i>
            </a>
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                <i class="fa fa-wrench"></i>
            </a>
            <a class="close-link">
                <i class="fa fa-times"></i>
            </a>
        </div>
    </div>

    <div class="ibox-content">
        <div class="panel blank-panel">
            <div class="panel-options">
                <ul class="nav nav-tabs">
                    <li class="active"><a class="text-center"><i class="fa fa-laptop"></i> 批量修改配置项值 </a></li>
                </ul>
            </div>
            <div class="panel-body">
                <div class="tab-content">
                        <form class="form-horizontal" role="form" method="POST" action="">
                        {{ form.hidden_tag() }}

                        <div class="hr-line-dashed"></div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label">子系统</label>
                            <div class="col-sm-10">
                                {{ form.systems(class='form-control select_env', placeholder='Select sub system', required='', disabled="disabled") }}
                            </div>
                        </div>


                        <div class="hr-line-dashed"></div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label">配置文件名</label>
                            <div class="col-sm-10">
                                {{ form.files(class='form-control select_env', placeholder='Select Config Name', required='', disabled="disabled") }}
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label">key</label>
                            <div class="col-sm-10">
                                {{ form.keys(class='form-control', placeholder='keys', required='', readonly="readonly") }}
                            </div>
                        </div>

                        {% for key_value_info in key_value_infos %}
                            <div class="hr-line-dashed"></div>

                            <div class="form-group">
                                <label class="col-sm-2 control-label">{{ key_value_info.conf_env }}_key_value</label>
                                <div class="col-sm-10">
                                    <textarea class='form-control' name="{{ key_value_info.conf_env }}" placeholder="{{ key_value_info.conf_env }} value">{{ key_value_info.conf_value }}</textarea>
                                </div>
                            </div>
                        {% endfor %}

                        <div class="hr-line-dashed"></div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label">jira 编号</label>
                            <div class="col-sm-10">
                                {{ form.jira_id(class='form-control', placeholder='Config jira id', required='', readonly="readonly") }}
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label">git 分支</label>
                            <div class="col-sm-10">
                                {{ form.branch_name(class='form-control', placeholder='git branch name', required='', readonly="readonly") }}
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>

                        <div class="form-group">
                            <div class="col-sm-4 col-sm-offset-2">
                                <button class="btn btn-primary" id="off" type="submit"> 提交 </button>
                            </div>
                        </div>

                        </form>
                </div>
            </div>
        </div>
    </div>

{% endblock %}


{% block script %}
    {{ super() }}

    <script>
        $(document).ready(function() {
            $(".select_env").select2();

        });

        $('#off').click(function(){
          $('.select_env').removeAttr("disabled");
        });


    </script>


{% endblock %}